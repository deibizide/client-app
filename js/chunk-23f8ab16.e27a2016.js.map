{"version":3,"sources":["webpack:///./src/components/donate/methods/CreditCardPayment.vue?6770","webpack:///./src/js/stripe.js","webpack:///src/components/donate/methods/CreditCardPayment.vue","webpack:///./src/components/donate/methods/CreditCardPayment.vue?f61b","webpack:///./src/components/donate/methods/CreditCardPayment.vue","webpack:///./src/components/donate/methods/CreditCardPayment.vue?d7ca"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_e","on","$event","preventDefault","submit","_s","isError","directives","name","rawName","value","expression","domProps","target","composing","email","_m","isLoading","amount","Array","isArray","mandateAcceptance","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","staticRenderFns","loadStripeCheckout","callback","e","document","createElement","src","type","getElementsByTagName","appendChild","addEventListener","response","paymentIntent","status","displayError","textContent","error","message","component"],"mappings":"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","file":"js/chunk-23f8ab16.e27a2016.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[(_vm.isLoading)?_c('div',[_c('div',{staticClass:\"hmi__loader\",attrs:{\"id\":\"main-loader\"}},[_c('Icon',{staticClass:\"fa-spin fa-3x text-primary\",attrs:{\"icon\":\"spinner\"}}),_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])],1)]):_vm._e(),_c('div',{staticClass:\"container hmi__payment__container p-5 rounded\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[(_vm.isError)?_c('div',{staticClass:\"row d-flex justify-content-center flex-column-lg\"},[_c('div',{staticClass:\"p-2 text-center rounded badge-danger form-group row col-10 col-md-7 col-xl-5\"},[_vm._v(\" \"+_vm._s(_vm.isError)+\" \")])]):_vm._e(),_c('div',{staticClass:\"row d-flex justify-content-center flex-column-lg\"},[_c('div',{staticClass:\"form-group row col-10 col-md-7 col-xl-5\"},[_c('label',{staticClass:\"col-form-label\",attrs:{\"type\":\"email\",\"for\":\"cardholder-email\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"form-control StripeElement\",attrs:{\"type\":\"text\",\"id\":\"cardholder-email\",\"name\":\"cardholder-email\",\"placeholder\":\"jenny@example.com\",\"required\":\"\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})])]),_c('div',{staticClass:\"row d-flex justify-content-center flex-column-lg\"},[_c('div',{staticClass:\"form-group row col-10 col-md-7 col-xl-5\"},[_c('label',{staticClass:\"col-form-label\",attrs:{\"for\":\"cardholder-name\"}},[_vm._v(\"Cardholder Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control StripeElement\",attrs:{\"type\":\"text\",\"id\":\"cardholder-name\",\"name\":\"cardholder-name\",\"placeholder\":\"Jenny Rosen\",\"required\":\"\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})])]),_vm._m(0),_c('div',{staticClass:\"text-danger text-center mb-3\",attrs:{\"id\":\"card-errors\",\"role\":\"alert\"}}),_c('div',{staticClass:\"row d-flex justify-content-center flex-column-lg\"},[_c('button',{staticClass:\"form-group col-6 col-md-3 col-xl-3 btn btn-primary btn-lg\",attrs:{\"id\":\"card-button\",\"data-secret\":\"donation.customerKey\",\"disabled\":_vm.isLoading},on:{\"click\":_vm.submit}},[_vm._v(\" Donate \"+_vm._s(_vm.amount)+\"$ \")])]),_c('div',{staticClass:\"row d-flex justify-content-center text-center\"},[_c('div',{staticClass:\"form-check col-10 col-lg-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mandateAcceptance),expression:\"mandateAcceptance\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"required\":\"\"},domProps:{\"checked\":Array.isArray(_vm.mandateAcceptance)?_vm._i(_vm.mandateAcceptance,null)>-1:(_vm.mandateAcceptance)},on:{\"change\":function($event){var $$a=_vm.mandateAcceptance,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.mandateAcceptance=$$a.concat([$$v]))}else{$$i>-1&&(_vm.mandateAcceptance=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.mandateAcceptance=$$c}}}}),_c('small',[_vm._v(\"I authorise \"),_c('span',{staticClass:\"text-bold\"},[_vm._v(\"Healthy Minds Initiative \")]),_vm._v(\" to send instructions to the financial institution that issued my card to take a payment of \"+_vm._s(_vm.amount)+\" USD from my card account. \")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row d-flex justify-content-center flex-column-lg\"},[_c('div',{staticClass:\"form-group row col-10 col-md-7 col-xl-5\"},[_c('label',{staticClass:\"col-form-label\",attrs:{\"for\":\"card-details\"}},[_vm._v(\"Card Details\")]),_c('div',{staticClass:\"form-control StripeElement\",attrs:{\"id\":\"card-element\"}})])])}]\n\nexport { render, staticRenderFns }","export const loadStripeCheckout = callback => {\n    let e = document.createElement('script');\n    e.src = `https://sandbox-assets.secure.checkout.visa.com/checkout-widget/resources/js/integration/v1/sdk.js`;\n    e.type = 'text/javascript';\n    document.getElementsByTagName('head')[0].appendChild(e);\n    e.addEventListener('load', callback);\n};\n","<template>\n    <div class=\"page\">\n        <div v-if=\"isLoading\">\n            <div class=\"hmi__loader\" id=\"main-loader\">\n                <Icon icon=\"spinner\" class=\"fa-spin fa-3x text-primary\" />\n                <span class=\"sr-only\">Loading...</span>\n            </div>\n        </div>\n        <div class=\"container hmi__payment__container p-5 rounded\">\n            <form @submit.prevent=\"submit\">\n                <div v-if=\"isError\" class=\"row d-flex justify-content-center flex-column-lg\">\n                    <div class=\"p-2 text-center rounded badge-danger form-group row col-10 col-md-7 col-xl-5\">\n                        {{ isError }}\n                    </div>\n                </div>\n                <div class=\"row d-flex justify-content-center flex-column-lg\">\n                    <div class=\"form-group row col-10 col-md-7 col-xl-5\">\n                        <label type=\"email\" for=\"cardholder-email\" class=\"col-form-label\">Email</label>\n                        <input\n                            type=\"text\"\n                            id=\"cardholder-email\"\n                            v-model=\"email\"\n                            name=\"cardholder-email\"\n                            placeholder=\"jenny@example.com\"\n                            required\n                            class=\"form-control StripeElement\"\n                        />\n                    </div>\n                </div>\n\n                <div class=\"row d-flex justify-content-center flex-column-lg\">\n                    <div class=\"form-group row col-10 col-md-7 col-xl-5\">\n                        <label for=\"cardholder-name\" class=\"col-form-label\">Cardholder Name</label>\n                        <input\n                            type=\"text\"\n                            id=\"cardholder-name\"\n                            v-model=\"name\"\n                            name=\"cardholder-name\"\n                            placeholder=\"Jenny Rosen\"\n                            required\n                            class=\"form-control StripeElement\"\n                        />\n                    </div>\n                </div>\n                <div class=\"row d-flex justify-content-center flex-column-lg\">\n                    <div class=\"form-group row col-10 col-md-7 col-xl-5\">\n                        <label for=\"card-details\" class=\"col-form-label\">Card Details</label>\n                        <div id=\"card-element\" class=\"form-control StripeElement\"></div>\n                    </div>\n                </div>\n\n                <!--  Used to display form errors -->\n                <div id=\"card-errors\" class=\"text-danger text-center mb-3\" role=\"alert\"></div>\n\n                <div class=\"row d-flex justify-content-center flex-column-lg\">\n                    <button\n                        @click=\"submit\"\n                        id=\"card-button\"\n                        class=\"form-group col-6 col-md-3 col-xl-3 btn btn-primary btn-lg\"\n                        data-secret=\"donation.customerKey\"\n                        :disabled=\"isLoading\"\n                    >\n                        Donate {{ amount }}$\n                    </button>\n                </div>\n\n                <div class=\"row d-flex justify-content-center text-center\">\n                    <div class=\"form-check col-10 col-lg-6\">\n                        <input type=\"checkbox\" class=\"form-check-input\" required v-model=\"mandateAcceptance\" />\n                        <small\n                            >I authorise\n                            <span class=\"text-bold\">Healthy Minds Initiative </span>\n                            to send instructions to the financial institution that issued my card to take a payment of\n                            {{ amount }} USD from my card account.\n                        </small>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { loadStripeCheckout } from '@src/js/stripe';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    data() {\n        return {\n            isLoading: false,\n            isError: false,\n\n            stripe: null,\n            elements: null,\n            card: null,\n\n            name: null,\n            email: null,\n\n            mandateAcceptance: false,\n        };\n    },\n    computed: {\n        ...mapGetters('DONATION', ['clientSecret', 'amount']),\n\n        form() {\n            return document.getElementById('payment-form');\n        },\n\n        style() {\n            return {\n                base: {\n                    fontFamily: 'Montserrat',\n                },\n            };\n        },\n    },\n    methods: {\n        async submit() {\n            if (this.isLoading) {\n                return;\n            }\n\n            if (!this.name || !this.email) {\n                this.isError = 'You must fill out the form.';\n                return;\n            }\n\n            this.isLoading = true;\n            try {\n                // since we need to use the same instance of Stripe, we won't call the store\n                const response = await this.stripe.confirmCardPayment(this.clientSecret, {\n                    payment_method: {\n                        card: this.elements.getElement('card'),\n                        billing_details: {\n                            name: this.name,\n                            email: this.email,\n                        },\n                    },\n                });\n\n                if (response.paymentIntent.status === 'succeeded') {\n                    this.$router.push({ name: 'donate-thank-you' });\n                }\n            } catch (error) {\n                // console.log(error);\n                this.isError = error;\n            } finally {\n                this.isLoading = false;\n            }\n        },\n    },\n    async mounted() {\n        // TODO: check for this on route change, BEFORE page loads --- ideally in the router.\n        if (!this.amount || !this.clientSecret) {\n            this.$router.push({ name: 'donate' });\n            return;\n        }\n\n        loadStripeCheckout(() => {\n            this.stripe = window.Stripe(process.env.VUE_APP_STRIPE_KEY);\n            this.elements = this.stripe.elements({\n                fonts: [\n                    {\n                        cssSrc: 'https://fonts.googleapis.com/css?family=Montserrat:300',\n                    },\n                ],\n            });\n            this.card = this.elements.create('card', { style: this.style });\n            this.card.mount('#card-element');\n            this.card.addEventListener('change', ({ error }) => {\n                const displayError = document.getElementById('card-errors');\n                if (error) {\n                    displayError.textContent = error.message;\n                } else {\n                    displayError.textContent = '';\n                }\n            });\n        });\n    },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import './../../../style/_variables';\n.StripeElement {\n    height: 40px;\n    padding: 10px 12px;\n\n    color: $dark;\n    background-color: white;\n    border: 1px solid transparent;\n    border-radius: 4px;\n\n    box-shadow: 0 1px 3px 0 #e6ebf1;\n    -webkit-transition: box-shadow 150ms ease;\n    transition: box-shadow 150ms ease;\n}\n\n.StripeElement--invalid {\n    border-color: $danger;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditCardPayment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditCardPayment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreditCardPayment.vue?vue&type=template&id=67d17369&scoped=true&\"\nimport script from \"./CreditCardPayment.vue?vue&type=script&lang=js&\"\nexport * from \"./CreditCardPayment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreditCardPayment.vue?vue&type=style&index=0&id=67d17369&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67d17369\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditCardPayment.vue?vue&type=style&index=0&id=67d17369&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditCardPayment.vue?vue&type=style&index=0&id=67d17369&scoped=true&lang=scss&\""],"sourceRoot":""}